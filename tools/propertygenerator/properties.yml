# SPDX-License-Identifier: LGPL-2.1-only OR LGPL-3.0-only OR LicenseRef-KDE-Accepted-LGPL
# SPDX-FileCopyrightText: 2024 Arjen Hiemstra <ahiemstra@heimr.nl>*

# \brief The root property group for all elements.
#
# This class contains all the properties that are used to style an element.

layout:
    # \brief A property group containing properties related to the layout of an element.

    alignment: &alignment
        # \brief A property group with properties related to alignment.

        container: Union::Properties::AlignmentContainer
        horizontal: Union::Properties::Alignment
        vertical: Union::Properties::Alignment
        order: int

    width: qreal
    height: qreal
    spacing: qreal

    padding: &size
        # \brief A property group representing a set of sizes for cardinal directions.

        left: qreal
        right: qreal
        top: qreal
        bottom: qreal

        _extra_system_includes:
            "property.h.j2":
            -   "QMarginsF"
        _extra_code:
            "property.h.j2":
                public: |4
                        /*!
                           Convert a Size property to QMarginsF.

                           If any values are not set, they will use 0.0.
                         */
                        QMarginsF toMargins() const;
            "property.cpp.j2":
                global: |4
                    QMarginsF {{ type_name }}::toMargins() const
                    {
                        return QMarginsF{d->left.value_or(0.0), d->top.value_or(0.0), d->right.value_or(0.0), d->bottom.value_or(0.0)};
                    }

    inset: *size

    margins: *size

text:
    # \brief A property group containing properties related to the text of an element.

    alignment: *alignment
    font: QFont
    color: Union::Color

icon:
    # \brief A property group containing properties related to an element's icon.

    alignment: *alignment
    width: qreal
    height: qreal
    name: QString
    source: QUrl
    color: Union::Color

background:
    # \brief A property group containing properties related to an element's background.

    color: Union::Color
    image: &image
        # \brief A property group describing properties of an image.

        source: std::filesystem::path
        width: qreal
        height: qreal
        xOffset: qreal
        yOffset: qreal
        flags: Union::Properties::ImageFlags
        maskColor: Union::Color

border:
    # \brief A property group containing properties of an element's border.

    left: &line
        # \brief A property group containing the properties of a line.

        size: qreal
        color: Union::Color
        style: Union::Properties::LineStyle
        image: *image

    right: *line
    top: *line
    bottom: *line

    _extra_system_includes:
        "property.h.j2":
        -   "QMarginsF"

    _extra_code:
        "property.h.j2":
            public: |4
                    /*! Returns the size of all borders */
                    QMarginsF sizes() const;

        "property.cpp.j2":
            global: |4
                QMarginsF BorderProperty::sizes() const
                {
                    QMarginsF result;

                    if (d->left) {
                        result.setLeft(d->left->size().value_or(0.0));
                    }
                    if (d->right) {
                        result.setRight(d->right->size().value_or(0.0));
                    }
                    if (d->top) {
                        result.setTop(d->top->size().value_or(0.0));
                    }
                    if (d->bottom) {
                        result.setBottom(d->bottom->size().value_or(0.0));
                    }

                    return result;
                }

outline:
    # \brief A property group containing properties of an element's outline.

    left: *line
    right: *line
    top: *line
    bottom: *line

corners:
    # \brief A property group containing properties of a background's corners.

    topLeft: &corner
        # \brief A property group containing the properties of a corner.

        radius: qreal
        width: qreal
        height: qreal
        color: Union::Color
        image: *image

    topRight: *corner
    bottomLeft: *corner
    bottomRight: *corner

    _extra_code:
        "property.h.j2":
            public: |4
                    struct CornerRadii {
                        qreal topLeft = 0.0;
                        qreal topRight = 0.0;
                        qreal bottomLeft = 0.0;
                        qreal bottomRight = 0.0;
                    };

                    /*! Returns the radii of all corners */
                    CornerRadii radii() const;

        "property.cpp.j2":
            global: |4
                CornersProperty::CornerRadii CornersProperty::radii() const
                {
                    CornerRadii result;

                    if (d->topLeft) {
                        result.topLeft = d->topLeft->radius().value_or(0.0);
                    }
                    if (d->topRight) {
                        result.topRight = d->topRight->radius().value_or(0.0);
                    }
                    if (d->bottomLeft) {
                        result.bottomLeft = d->bottomLeft->radius().value_or(0.0);
                    }
                    if (d->bottomRight) {
                        result.bottomRight = d->bottomRight->radius().value_or(0.0);
                    }

                    return result;
                }

shadow:
    # \brief A property group containing properties relating to an element's shadow.

    offset:
        horizontal: qreal
        vertical: qreal

        _extra_system_includes:
            "property.h.j2":
            -   "QVector2D"

        _extra_code:
            "property.h.j2":
                public: |4
                        /*!
                           Convert an Offset property to QVector2D.

                           If any values are not set, they will use 0.0.
                         */
                        QVector2D toVector2D() const;
            "property.cpp.j2":
                global: |4
                    QVector2D {{ type_name }}::toVector2D() const
                    {
                        return QVector2D{float(d->horizontal.value_or(0.0)), float(d->vertical.value_or(0.0))};
                    }

    color: Union::Color
    size: qreal
    blur: qreal

    left: *line
    right: *line
    top: *line
    bottom: *line

    topLeft: *corner
    topRight: *corner
    bottomLeft: *corner
    bottomRight: *corner
