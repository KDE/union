{#
SPDX-License-Identifier: LGPL-2.1-only OR LGPL-3.0-only OR LicenseRef-KDE-Accepted-LGPL
SPDX-FileCopyrightText: 2024 Arjen Hiemstra <ahiemstra@heimr.nl>

This is the template that is used to generate grouped properties for the QtQuick output plugin.
#}
// SPDX-License-Identifier: LGPL-2.1-only OR LGPL-3.0-only OR LicenseRef-KDE-Accepted-LGPL
//
// This file is automatically generated. To regenerate, run `tools/propertygenerator/generate_properties.py`.

#pragma once

{#
The include list may contain extra newlines that are hard to get rid of with the
template but that clang format doesn't like, so disable format for that.
#}
// clang-format off
#include <QObject>
#include <QProperty>
#include <qqmlregistration.h>

{% for include in system_includes | sort %}
#include <{{ include }}>
{% endfor %}

#include <properties/{{ type_name }}.h>

{% for value in values %}
{% if value.is_property %}
#include "{{ value.type }}Group.h"
{% endif %}
{% endfor %}
// clang-format on

class {{ type_name }}Group : public QObject
{
    Q_OBJECT
    QML_ANONYMOUS

public:
    {{ type_name }}Group();

    void update(const Union::Properties::{{ type_name }} &newState);

{% for value in values %}
{% if value.is_property %}
    Q_PROPERTY({{ value.type}}Group *{{ value.name }} READ {{ value.name }} CONSTANT)
    {{ value.type }}Group *{{ value.name }}() const;
{% else %}
    Q_PROPERTY({{ value.type }} {{ value.name }} READ {{ value.name }} WRITE set{{ value.name | ucfirst }} BINDABLE bindable{{ value.name | ucfirst }} NOTIFY {{ value.name }}Changed)
    {{ value.type }} {{ value.name }}() const;
    void set{{ value.name | ucfirst }}(const {{ value.type }} &newValue);
    QBindable<{{ value.type }}> bindable{{ value.name | ucfirst }}();
    Q_SIGNAL void {{ value.name }}Changed();
{% endif %}

{% endfor %}
private:
{% for value in values %}
{% if value.is_property %}
    std::unique_ptr<{{ value.type }}Group> m_{{ value.name }};
{% else %}
    Q_OBJECT_BINDABLE_PROPERTY({{ type_name }}Group, {{ value.type }}, m_{{ value.name }}, &{{ type_name }}Group::{{ value.name }}Changed)
{% endif %}
{% endfor %}
};
